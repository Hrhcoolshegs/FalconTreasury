import { Counterparty, Trade, LiquidityData, SentimentData, Insight, ProductPerformance } from '../types';

// Generate 50 counterparties
export const counterparties: Counterparty[] = [
  {
    counterparty_id: 'CP-NG-001',
    name: 'First Bank of Nigeria',
    short_name: 'FirstBank',
    sector: 'Bank',
    country: 'Nigeria',
    region: 'West Africa',
    city: 'Lagos',
    internal_rating: 'A',
    external_rating: 'AA-',
    exposure_ngn: 850000000,
    exposure_usd: 625000,
    exposure_limit_ngn: 1000000000,
    exposure_limit_usd: 1000000,
    utilization_percentage: 85.0,
    settlement_reliability: 92.5,
    avg_confirmation_time: 2.5,
    total_trades_ytd: 145,
    total_volume_ytd_ngn: 15000000000,
    total_volume_ytd_usd: 10500000,
    outstanding_trades: 8,
    last_trade_date: '2025-11-25',
    onboarding_date: '2023-05-15',
    relationship_tenure_months: 30,
    primary_contact_name: 'Chinedu Okonkwo',
    primary_contact_email: 'c.okonkwo@firstbank.com',
    primary_contact_phone: '+234-1-448-5500',
    product_mix: ['FX Spot', 'FX Forward', 'MM'],
    preferred_settlement: 'T+0',
    kyc_status: 'Complete',
    kyc_expiry_date: '2026-05-15',
    aml_status: 'Clear',
    pep_status: false,
    sanction_status: 'Clear',
    relationship_manager: 'Aisha Bello',
    desk_assignment: 'FX Desk A',
    legal_entity_identifier: 'LEI123456789012345678',
    swift_code: 'FBNINGLA',
    bank_sort_code: '011-152490',
    status: 'Active',
    risk_category: 'Low',
  },
  {
    counterparty_id: 'CP-NG-002',
    name: 'Access Bank Plc',
    short_name: 'Access',
    sector: 'Bank',
    country: 'Nigeria',
    region: 'West Africa',
    city: 'Lagos',
    internal_rating: 'A',
    external_rating: 'A+',
    exposure_ngn: 720000000,
    exposure_usd: 500000,
    exposure_limit_ngn: 1000000000,
    exposure_limit_usd: 1000000,
    utilization_percentage: 72.0,
    settlement_reliability: 94.2,
    avg_confirmation_time: 2.1,
    total_trades_ytd: 132,
    total_volume_ytd_ngn: 13500000000,
    total_volume_ytd_usd: 9500000,
    outstanding_trades: 6,
    last_trade_date: '2025-11-24',
    onboarding_date: '2023-03-20',
    relationship_tenure_months: 32,
    primary_contact_name: 'Ngozi Adebayo',
    primary_contact_email: 'n.adebayo@accessbank.com',
    primary_contact_phone: '+234-1-280-2500',
    product_mix: ['FX Spot', 'MM', 'T-Bills'],
    preferred_settlement: 'T+1',
    kyc_status: 'Complete',
    kyc_expiry_date: '2026-03-20',
    aml_status: 'Clear',
    pep_status: false,
    sanction_status: 'Clear',
    relationship_manager: 'Olumide Ajayi',
    desk_assignment: 'FX Desk A',
    legal_entity_identifier: 'LEI223456789012345679',
    swift_code: 'ABNGNGLA',
    bank_sort_code: '044-150149',
    status: 'Active',
    risk_category: 'Low',
  },
  {
    counterparty_id: 'CP-NG-003',
    name: 'Zenith Bank Plc',
    short_name: 'Zenith',
    sector: 'Bank',
    country: 'Nigeria',
    region: 'West Africa',
    city: 'Lagos',
    internal_rating: 'B+',
    external_rating: 'BBB+',
    exposure_ngn: 950000000,
    exposure_usd: 680000,
    exposure_limit_ngn: 1000000000,
    exposure_limit_usd: 1000000,
    utilization_percentage: 95.0,
    settlement_reliability: 88.5,
    avg_confirmation_time: 3.2,
    total_trades_ytd: 156,
    total_volume_ytd_ngn: 16200000000,
    total_volume_ytd_usd: 11500000,
    outstanding_trades: 12,
    last_trade_date: '2025-11-25',
    onboarding_date: '2023-01-10',
    relationship_tenure_months: 34,
    primary_contact_name: 'Ibrahim Musa',
    primary_contact_email: 'i.musa@zenithbank.com',
    primary_contact_phone: '+234-1-278-7000',
    product_mix: ['FX Spot', 'FX Forward', 'Bonds'],
    preferred_settlement: 'T+2',
    kyc_status: 'Complete',
    kyc_expiry_date: '2026-01-10',
    aml_status: 'Clear',
    pep_status: false,
    sanction_status: 'Clear',
    relationship_manager: 'Fatima Hassan',
    desk_assignment: 'FX Desk B',
    legal_entity_identifier: 'LEI323456789012345680',
    swift_code: 'ZEIBNGLA',
    bank_sort_code: '057-150142',
    status: 'Active',
    risk_category: 'Medium',
  },
];

// Add more counterparties programmatically
const additionalCounterparties: Counterparty[] = [];
const sectors = ['Bank', 'Pension Fund', 'Asset Manager', 'Corporate', 'Insurance'];
const banks = ['GTBank', 'UBA', 'Fidelity', 'Union', 'Stanbic', 'Wema', 'Sterling', 'Ecobank'];

for (let i = 4; i <= 50; i++) {
  const sector = sectors[Math.floor(Math.random() * sectors.length)];
  const name = sector === 'Bank' ? `${banks[i % banks.length]} Bank` : `${sector} Ltd ${i}`;
  const exposureNGN = Math.floor(Math.random() * 900000000) + 100000000;
  const exposureUSD = Math.floor(Math.random() * 900000) + 100000;
  const totalVolumeNGN = Math.floor(Math.random() * 15000000000) + 5000000000;
  const totalVolumeUSD = Math.floor(Math.random() * 10000000) + 3000000;

  additionalCounterparties.push({
    counterparty_id: `CP-NG-${String(i).padStart(3, '0')}`,
    name,
    short_name: name.split(' ')[0],
    sector,
    country: 'Nigeria',
    region: 'West Africa',
    city: i % 3 === 0 ? 'Abuja' : 'Lagos',
    internal_rating: ['A', 'B+', 'B', 'C+'][Math.floor(Math.random() * 4)],
    external_rating: ['AA-', 'A+', 'BBB+', 'BB'][Math.floor(Math.random() * 4)],
    exposure_ngn: exposureNGN,
    exposure_usd: exposureUSD,
    exposure_limit_ngn: 1000000000,
    exposure_limit_usd: 1000000,
    utilization_percentage: Math.floor((exposureNGN / 1000000000) * 100),
    settlement_reliability: Math.floor(Math.random() * 20) + 75,
    avg_confirmation_time: Math.random() * 4 + 1,
    total_trades_ytd: Math.floor(Math.random() * 150) + 50,
    total_volume_ytd_ngn: totalVolumeNGN,
    total_volume_ytd_usd: totalVolumeUSD,
    outstanding_trades: Math.floor(Math.random() * 15),
    last_trade_date: '2025-11-25',
    onboarding_date: '2023-05-15',
    relationship_tenure_months: Math.floor(Math.random() * 36) + 12,
    primary_contact_name: 'Contact Name',
    primary_contact_email: `contact@${name.toLowerCase().replace(/\s/g, '')}.com`,
    primary_contact_phone: '+234-1-xxx-xxxx',
    product_mix: ['FX Spot', 'MM'],
    preferred_settlement: ['T+0', 'T+1', 'T+2'][Math.floor(Math.random() * 3)],
    kyc_status: 'Complete',
    kyc_expiry_date: '2026-05-15',
    aml_status: 'Clear',
    pep_status: false,
    sanction_status: 'Clear',
    relationship_manager: ['Aisha Bello', 'Olumide Ajayi', 'Fatima Hassan'][Math.floor(Math.random() * 3)],
    desk_assignment: ['FX Desk A', 'FX Desk B', 'MM Desk'][Math.floor(Math.random() * 3)],
    legal_entity_identifier: `LEI${i}23456789012345680`,
    swift_code: `${name.substring(0, 4).toUpperCase()}NGLA`,
    bank_sort_code: `0${Math.floor(Math.random() * 90) + 10}-${Math.floor(Math.random() * 900000) + 100000}`,
    status: 'Active',
    risk_category: ['Low', 'Medium', 'High'][Math.floor(Math.random() * 3)],
  });
}

export const allCounterparties = [...counterparties, ...additionalCounterparties];

// Generate 90 days of liquidity data
export const liquidityData: LiquidityData[] = Array.from({ length: 90 }, (_, i) => {
  const date = new Date('2025-08-28');
  date.setDate(date.getDate() + i);
  const baseBalance = 25000000000;
  const volatility = Math.random() * 3000000000 - 1500000000;

  return {
    date: date.toISOString().split('T')[0],
    opening_balance_ngn: baseBalance + volatility,
    opening_balance_usd: 18000000 + Math.random() * 4000000 - 2000000,
    inflows_ngn: 8500000000 + Math.random() * 2000000000,
    inflows_usd: 6200000 + Math.random() * 1000000,
    outflows_ngn: 7200000000 + Math.random() * 2000000000,
    outflows_usd: 5800000 + Math.random() * 1000000,
    net_flow_ngn: 1300000000 + Math.random() * 1000000000,
    net_flow_usd: 400000 + Math.random() * 200000,
    closing_balance_ngn: baseBalance + volatility + 1300000000,
    closing_balance_usd: 18400000 + Math.random() * 4000000 - 2000000,
    required_reserves_ngn: 20000000000,
    required_reserves_usd: 15000000,
    buffer_ngn: 6300000000,
    buffer_usd: 3400000,
    buffer_percentage_ngn: 31.5,
    buffer_percentage_usd: 22.7,
    liquidity_ratio: 1.28 + Math.random() * 0.2,
    stress_test_scenario: 'Base',
    stress_test_result_ngn: 22500000000,
    stress_test_result_usd: 16200000,
    predicted_7d_balance_ngn: 27800000000,
    predicted_7d_balance_usd: 19200000,
    predicted_14d_balance_ngn: 28500000000,
    predicted_14d_balance_usd: 19800000,
    predicted_30d_balance_ngn: 30200000000,
    predicted_30d_balance_usd: 21000000,
    confidence_7d: 92,
    confidence_14d: 85,
    confidence_30d: 75,
    major_inflows: [{ source: 'CBN', amount: 5000000000 }],
    major_outflows: [{ destination: 'Debt Service', amount: 3000000000 }],
    liquidity_alert_status: i % 10 === 0 ? 'Warning' : 'Normal',
    alert_reason: i % 10 === 0 ? 'Buffer breach projected' : 'None',
  };
});

// Generate sentiment data for all counterparties
export const sentimentData: SentimentData[] = allCounterparties.map((cp, idx) => {
  const likelihood = Math.floor(Math.random() * 5) + 1;
  const fit = Math.floor(Math.random() * 5) + 1;

  return {
    counterparty_id: cp.counterparty_id,
    sentiment_date: '2025-11-25',
    likelihood_score: likelihood,
    fit_score: fit,
    sentiment_bucket: `L${likelihood}-F${fit}`,
    confidence: Math.floor(Math.random() * 20) + 75,
    likelihood_settle_ontime: Math.floor(Math.random() * 20) + 75,
    likelihood_confirm_ontime: Math.floor(Math.random() * 20) + 75,
    likelihood_maintain_volume: Math.floor(Math.random() * 20) + 75,
    likelihood_no_issues: Math.floor(Math.random() * 20) + 75,
    fit_fx_spot: Math.floor(Math.random() * 30) + 70,
    fit_fx_forward: Math.floor(Math.random() * 30) + 65,
    fit_money_market: Math.floor(Math.random() * 30) + 60,
    fit_bonds: Math.floor(Math.random() * 30) + 55,
    fit_tenor_short: Math.floor(Math.random() * 20) + 80,
    fit_tenor_medium: Math.floor(Math.random() * 25) + 70,
    fit_tenor_long: Math.floor(Math.random() * 30) + 60,
    fit_exposure_capacity: Math.floor(Math.random() * 25) + 70,
    relationship_strength: Math.floor(Math.random() * 30) + 65,
    sentiment_trend_30d: ['Improving', 'Stable', 'Declining'][Math.floor(Math.random() * 3)],
    sentiment_change_bucket: 'No Change',
    previous_bucket: `L${likelihood}-F${fit}`,
    bucket_stability_days: Math.floor(Math.random() * 90) + 10,
    recommendation: likelihood >= 4 && fit >= 4 ? 'Increase Exposure' : likelihood <= 2 || fit <= 2 ? 'Reduce Exposure' : 'Maintain',
    last_sentiment_review: '2025-11-20',
    next_review_due: '2025-12-20',
    alert_status: likelihood <= 2 || fit <= 2 ? 'Alert' : 'None',
    alert_reason: likelihood <= 2 || fit <= 2 ? 'Low score detected' : '',
  };
});

// Generate insights
export const insights: Insight[] = [
  {
    insight_id: 'INS-20251125-001',
    insight_type: 'Alert',
    category: 'Settlement',
    severity: 'High',
    title: 'Settlement Delays Detected for 3 Counterparties',
    description: 'FirstBank, Access Bank, and Zenith Bank trades delayed by avg 8 hours',
    created_timestamp: '2025-11-25T14:22:15Z',
    affected_counterparties: ['CP-NG-001', 'CP-NG-002', 'CP-NG-003'],
    affected_trades: ['TRD-20251125-015', 'TRD-20251125-022'],
    affected_desks: ['FX Desk A'],
    financial_impact_ngn: 5000000,
    financial_impact_usd: 3500,
    operational_impact: 'High',
    regulatory_impact: 'No',
    recommended_action: 'Contact settlement ops immediately',
    action_button_label: 'Launch Workflow',
    associated_workflow_id: 'WF-002',
    status: 'Active',
    acknowledged_by: null,
    acknowledged_timestamp: null,
    resolved_by: null,
    resolved_timestamp: null,
    resolution_notes: null,
    roi_estimate_ngn: 15000000,
    risk_reduction_estimate: 'Prevents potential ₦25M exposure breach',
  },
  {
    insight_id: 'INS-20251125-002',
    insight_type: 'Opportunity',
    category: 'Counterparty',
    severity: 'Medium',
    title: 'High-Fit Counterparty Identified: Zenith Bank',
    description: 'Zenith Bank upgraded to L4-F5, consider increasing exposure',
    created_timestamp: '2025-11-25T10:15:30Z',
    affected_counterparties: ['CP-NG-003'],
    affected_trades: [],
    affected_desks: ['FX Desk B'],
    financial_impact_ngn: 0,
    financial_impact_usd: 0,
    operational_impact: 'Low',
    regulatory_impact: 'No',
    recommended_action: 'Review limit increase with risk team',
    action_button_label: 'View Details',
    associated_workflow_id: null,
    status: 'Active',
    acknowledged_by: null,
    acknowledged_timestamp: null,
    resolved_by: null,
    resolved_timestamp: null,
    resolution_notes: null,
    roi_estimate_ngn: 25000000,
    risk_reduction_estimate: 'Potential revenue increase',
  },
  {
    insight_id: 'INS-20251125-003',
    insight_type: 'Risk',
    category: 'Liquidity',
    severity: 'Critical',
    title: 'Liquidity Buffer Approaching Threshold',
    description: '₦ buffer dropped 15% in 48 hours, now at 22% (target: 25%)',
    created_timestamp: '2025-11-25T09:00:00Z',
    affected_counterparties: [],
    affected_trades: [],
    affected_desks: [],
    financial_impact_ngn: 0,
    financial_impact_usd: 0,
    operational_impact: 'High',
    regulatory_impact: 'Yes',
    recommended_action: 'Generate liquidity forecast and contact treasury ops',
    action_button_label: 'Run Stress Test',
    associated_workflow_id: 'WF-005',
    status: 'Active',
    acknowledged_by: null,
    acknowledged_timestamp: null,
    resolved_by: null,
    resolved_timestamp: null,
    resolution_notes: null,
    roi_estimate_ngn: 0,
    risk_reduction_estimate: 'Prevents regulatory breach',
  },
];

// Generate product performance data
export const productPerformance: ProductPerformance[] = [
  {
    product_type: 'FX Spot',
    date: '2025-11-25',
    trade_count: 25,
    trade_volume_ngn: 12500000000,
    trade_volume_usd: 8750000,
    pnl_realized_ngn: 125000000,
    pnl_realized_usd: 87500,
    pnl_unrealized_ngn: 35000000,
    pnl_unrealized_usd: 24500,
    pnl_total_ngn: 160000000,
    pnl_total_usd: 112000,
    revenue_ngn: 180000000,
    revenue_usd: 126000,
    avg_trade_size_ngn: 500000000,
    avg_trade_size_usd: 350000,
    settlement_success_rate: 96.2,
    settlement_failure_count: 1,
    confirmation_time_avg: 2.3,
    active_counterparties: 15,
    new_counterparties: 1,
    market_share_estimate: 8.5,
    profitability_ratio: 1.28,
  },
  {
    product_type: 'FX Forward',
    date: '2025-11-25',
    trade_count: 15,
    trade_volume_ngn: 9500000000,
    trade_volume_usd: 6650000,
    pnl_realized_ngn: 142500000,
    pnl_realized_usd: 99750,
    pnl_unrealized_ngn: 45000000,
    pnl_unrealized_usd: 31500,
    pnl_total_ngn: 187500000,
    pnl_total_usd: 131250,
    revenue_ngn: 210000000,
    revenue_usd: 147000,
    avg_trade_size_ngn: 633333333,
    avg_trade_size_usd: 443333,
    settlement_success_rate: 94.8,
    settlement_failure_count: 1,
    confirmation_time_avg: 2.8,
    active_counterparties: 12,
    new_counterparties: 0,
    market_share_estimate: 7.2,
    profitability_ratio: 1.97,
  },
  {
    product_type: 'Money Market',
    date: '2025-11-25',
    trade_count: 18,
    trade_volume_ngn: 25900000000,
    trade_volume_usd: 18130000,
    pnl_realized_ngn: 422000000,
    pnl_realized_usd: 295400,
    pnl_unrealized_ngn: 85000000,
    pnl_unrealized_usd: 59500,
    pnl_total_ngn: 507000000,
    pnl_total_usd: 354900,
    revenue_ngn: 560000000,
    revenue_usd: 392000,
    avg_trade_size_ngn: 1438888889,
    avg_trade_size_usd: 1007222,
    settlement_success_rate: 98.5,
    settlement_failure_count: 0,
    confirmation_time_avg: 1.8,
    active_counterparties: 10,
    new_counterparties: 0,
    market_share_estimate: 12.5,
    profitability_ratio: 1.96,
  },
  {
    product_type: 'Treasury Bills',
    date: '2025-11-25',
    trade_count: 8,
    trade_volume_ngn: 6440000000,
    trade_volume_usd: 4508000,
    pnl_realized_ngn: 79800000,
    pnl_realized_usd: 55860,
    pnl_unrealized_ngn: 22000000,
    pnl_unrealized_usd: 15400,
    pnl_total_ngn: 101800000,
    pnl_total_usd: 71260,
    revenue_ngn: 115000000,
    revenue_usd: 80500,
    avg_trade_size_ngn: 805000000,
    avg_trade_size_usd: 563500,
    settlement_success_rate: 99.2,
    settlement_failure_count: 0,
    confirmation_time_avg: 1.5,
    active_counterparties: 8,
    new_counterparties: 0,
    market_share_estimate: 6.8,
    profitability_ratio: 1.58,
  },
  {
    product_type: 'Bonds',
    date: '2025-11-25',
    trade_count: 5,
    trade_volume_ngn: 5450000000,
    trade_volume_usd: 3815000,
    pnl_realized_ngn: 66450000,
    pnl_realized_usd: 46515,
    pnl_unrealized_ngn: 18000000,
    pnl_unrealized_usd: 12600,
    pnl_total_ngn: 84450000,
    pnl_total_usd: 59115,
    revenue_ngn: 95000000,
    revenue_usd: 66500,
    avg_trade_size_ngn: 1090000000,
    avg_trade_size_usd: 763000,
    settlement_success_rate: 97.5,
    settlement_failure_count: 0,
    confirmation_time_avg: 2.1,
    active_counterparties: 6,
    new_counterparties: 0,
    market_share_estimate: 5.2,
    profitability_ratio: 1.55,
  },
];

// Helper function to get filtered data based on global filters
export const getFilteredCounterparties = (filters: any) => {
  let filtered = allCounterparties;

  if (filters.desk) {
    filtered = filtered.filter(cp => cp.desk_assignment === filters.desk);
  }

  if (filters.region) {
    filtered = filtered.filter(cp => cp.region === filters.region);
  }

  if (filters.riskCategory) {
    filtered = filtered.filter(cp => cp.risk_category === filters.riskCategory);
  }

  return filtered;
};
